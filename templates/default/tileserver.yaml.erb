postgresql:
  host: <%= node[:tileserver][:postgresql][:host] %>
  port: <%= node[:tileserver][:postgresql][:port] %>
  dbnames: <%= node[:tileserver][:postgresql][:dbnames] %>
  user: <%= node[:tileserver][:postgresql][:user] %>
  password: <%= node[:tileserver][:postgresql][:password] %>
queries:
  config: <%= node[:tileserver][:vector_datasource][:path] %>/queries.yaml
  template-path: <%= node[:tileserver][:vector_datasource][:path] %>/queries
  reload-templates: false
<%- if node[:tileserver][:store][:enabled] -%>
store:
  type: <%= node[:tileserver][:store][:type] %>
  name: <%= node[:tileserver][:store][:name] %>
<%- if node[:tileserver][:store][:path] -%>
  path: <%= node[:tileserver][:store][:path] %>
<%- end -%>
<%- if node[:tileserver][:store][:date_prefix] -%>
  date-prefix: <%= node[:tileserver][:store][:date_prefix] %>
<%- end -%>
<%- if node[:tileserver][:store][:reduced_redundancy] %>
  reduced_redundancy: <%= node[:tileserver][:store][:reduced_redundancy] %>
<%- end -%>
<%- end -%>
<%- if node[:tileserver][:redis][:enabled] -%>
redis:
<%- if node[:tileserver][:redis][:host] -%>
  host: <%= node[:tileserver][:redis][:host] %>
<%- end -%>
<%- if node[:tileserver][:redis][:port] -%>
  port: <%= node[:tileserver][:redis][:port] %>
<%- end -%>
<%- if node[:tileserver][:redis][:db] -%>
  db: <%= node[:tileserver][:redis][:db] %>
<%- end -%>
<%- end -%>
<%- if node[:tileserver][:queue][:enabled] -%>
queue:
  type: <%= node[:tileserver][:queue][:type] %>
  name: <%= node[:tileserver][:queue][:name] %>
<%- end -%>
<%- if node[:tileserver][:health][:enabled] -%>
health:
  url: <%= node[:tileserver][:health][:url] -%>
<%- end -%>
